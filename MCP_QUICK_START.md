# MCP 服务自定义模块 - 快速开始

## 🎯 功能简介

MCP 服务自定义模块允许用户通过可视化界面轻松添加和管理 MCP (Model Context Protocol) 服务，无需手动编辑配置文件。

## ✨ 核心特性

- 📦 **20+ 预置服务模板** - GitHub、PostgreSQL、Slack、Notion 等
- 🎨 **v0.dev 风格设计** - 现代化卡片布局，流畅动画效果
- 🚀 **开箱即用** - 大部分服务无需 API Key
- 🔧 **自定义支持** - 可手动添加任意 MCP 服务
- 📱 **响应式设计** - 完美适配各种屏幕尺寸
- 🌓 **深色模式** - 完整的深色模式支持

## 🚦 快速开始

### 1. 访问服务管理页面

在应用中进入 **"探索"** → **"MCP 服务"**，或直接访问 `/mcp` 路由。

### 2. 浏览和添加服务

#### 方式一：从模板添加（推荐）

1. 在 **"服务模板"** 标签页浏览可用服务
2. 使用搜索框或分类筛选查找需要的服务
3. 点击服务卡片上的 **"添加服务"** 按钮
4. 如果服务需要 API Key：
   - 按照提示获取 API Key
   - 填写到配置对话框中
   - 点击 **"添加服务"**
5. 服务自动启用，即刻可用

#### 方式二：自定义添加

1. 点击页面右上角的 **"自定义添加"** 按钮
2. 填写服务信息：
   ```
   服务 ID: my-custom-service
   服务名称: 我的自定义服务
   描述: 服务功能描述
   命令: npx
   参数: -y @modelcontextprotocol/server-xxx
   环境变量: {"API_KEY": "your-key"}
   ```
3. 点击 **"添加"** 保存配置

### 3. 管理服务

切换到 **"我的服务"** 标签页，可以：

- ✅ **启用/禁用** - 点击电源图标切换服务状态
- 🔄 **测试连接** - 点击刷新图标测试服务是否正常
- ℹ️ **查看详情** - 点击信息图标查看服务配置
- 🗑️ **删除服务** - 点击删除图标移除服务

## 📦 推荐服务

### 开箱即用（无需配置）

| 服务 | 图标 | 功能 |
|------|------|------|
| **SQLite** | 🗄️ | 本地数据库查询 |
| **Filesystem** | 📁 | 文件系统访问 |
| **Git** | 🔀 | Git 版本控制 |
| **Puppeteer** | 🎪 | 浏览器自动化 |
| **Memory** | 🧠 | 知识图谱存储 |
| **Fetch** | 🌐 | 网页内容抓取 |

### 需要 API Key（功能强大）

| 服务 | 图标 | 功能 | 获取 Key |
|------|------|------|----------|
| **GitHub** | 🐙 | 代码仓库管理 | [获取 Token](https://github.com/settings/tokens) |
| **Brave Search** | 🦁 | 网络搜索 | [注册 API](https://brave.com/search/api/) |
| **Google Maps** | 🗺️ | 地图服务 | [Google Cloud](https://console.cloud.google.com/) |
| **Slack** | 💬 | 团队协作 | [Slack API](https://api.slack.com/apps) |
| **Notion** | 📝 | 笔记管理 | [Notion Integrations](https://www.notion.so/my-integrations) |

## 💡 使用技巧

### 1. 服务分类

使用分类筛选快速定位服务：
- 💻 **开发工具** - GitHub, Git, Filesystem
- 🗄️ **数据库** - PostgreSQL, SQLite, MongoDB
- 🔍 **搜索服务** - Brave Search, Google Maps
- 💬 **生产力** - Slack, Notion, Jira

### 2. 搜索技巧

搜索框支持：
- 服务名称：`github`
- 功能描述：`数据库`
- 关键词：`搜索`, `自动化`

### 3. 环境变量配置

环境变量使用 JSON 格式：
```json
{
  "API_KEY": "your-api-key-here",
  "API_URL": "https://api.example.com",
  "TIMEOUT": "30000"
}
```

### 4. 服务测试

添加服务后，建议：
1. 点击 **"测试连接"** 验证配置
2. 在 AI 对话中尝试调用服务工具
3. 查看后端日志确认服务运行状态

## 🔧 常见问题

### Q: 如何获取 GitHub Token？

A: 
1. 访问 https://github.com/settings/tokens
2. 点击 "Generate new token (classic)"
3. 选择权限：`repo`, `read:user`
4. 生成并复制 Token

### Q: 服务添加后无法使用？

A:
1. 检查服务是否启用（电源图标为绿色）
2. 点击 "测试连接" 验证配置
3. 查看环境变量是否正确填写
4. 参考服务文档确认权限设置

### Q: 如何更新服务配置？

A:
1. 在 "我的服务" 中找到要更新的服务
2. 目前需要删除后重新添加
3. （未来版本将支持直接编辑）

### Q: 可以导入导出配置吗？

A: 当前版本暂不支持，该功能已在规划中。

## 📊 服务状态说明

- 🟢 **已启用** - 服务正在运行，可以被 AI 调用
- 🔴 **已禁用** - 服务已停止，不会被 AI 调用
- ⚠️ **需要配置** - 服务缺少必要的 API Key
- ✅ **已配置** - 服务已正确配置

## 🎨 界面说明

### 服务卡片组成

```
┌─────────────────────────────────┐
│ 🐙  GitHub          [已启用]    │  ← 图标、名称、状态
│ 代码仓库管理和版本控制工具       │  ← 描述
│                                  │
│ [官方] [开发工具] [热门]         │  ← 标签
│                                  │
│ • 浏览代码  • 创建 Issue         │  ← 功能列表
│ • 管理 PR   +2 更多              │
│                                  │
│ [添加服务]  [ℹ️]                │  ← 操作按钮
└─────────────────────────────────┘
```

### 筛选和搜索

```
┌─────────────────────────────────┐
│ [🔍 搜索服务...]   [📁 全部分类] │  ← 搜索框和分类筛选
└─────────────────────────────────┘
```

## 🚀 最佳实践

1. **按需添加** - 只添加实际需要的服务
2. **安全存储** - API Key 存储在本地数据库，定期更新
3. **测试验证** - 添加后使用测试功能验证配置
4. **及时禁用** - 不用的服务及时禁用以节省资源
5. **查阅文档** - 遇到问题优先查看服务官方文档

## 🎓 进阶用法

### 自定义服务示例

假设要添加一个自定义天气服务：

```json
{
  "mcp_id": "my-weather",
  "name": "我的天气服务",
  "description": "自定义天气查询服务",
  "category": "other",
  "icon": "🌤️",
  "command": "npx",
  "args": ["-y", "my-weather-mcp-server"],
  "env_vars": {
    "WEATHER_API_KEY": "your-api-key"
  }
}
```

### 服务组合使用

多个服务可以协同工作，例如：
1. 使用 **Brave Search** 搜索信息
2. 使用 **Filesystem** 保存结果
3. 使用 **GitHub** 提交代码
4. 使用 **Slack** 发送通知

## 📚 扩展阅读

- [MCP 协议官方文档](https://modelcontextprotocol.io/)
- [完整实现文档](./MCP_SERVICE_CUSTOM_MODULE.md)
- [项目开发指南](./.github/copilot-instructions.md)
- [MCP 服务器列表](https://github.com/modelcontextprotocol/servers)

## 🆘 获取帮助

遇到问题？
1. 查看本快速指南
2. 阅读完整实现文档
3. 查看项目 Issue
4. 提交新的 Issue

---

**提示**: 此模块正在持续优化中，欢迎提供反馈和建议！

**版本**: 1.0.0 | **更新**: 2025-10-19
