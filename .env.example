# ========================================
# Personal Chatbox - 环境变量配置示例
# ========================================
#
# 使用说明:
# 1. 复制此文件为 .env
# 2. 填入您自己的 API Keys 和凭据
# 3. 重启服务器
#
# 注意: .env 文件不会被提交到 Git 仓库
# ========================================

# ========================================
# 服务器配置
# ========================================

# 后端服务器端口
PORT=3001

# 后端服务器主机
HOST=0.0.0.0

# 环境模式 (development, production)
NODE_ENV=development

# CORS 允许的源
CORS_ORIGIN=http://localhost:5173

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=info

# ========================================
# 安全配置
# ========================================

# JWT密钥 (生产环境请务必修改！)
JWT_SECRET=your-secret-key-change-in-production

# 会话密钥 (生产环境请务必修改！)
SESSION_SECRET=your-session-secret-change-in-production

# ========================================
# AI 模型 API Keys
# ========================================

# DeepSeek API Key (推荐 - 性价比最高)
# 获取地址: https://platform.deepseek.com/api_keys
# 价格: ¥1/百万tokens
DEEPSEEK_API_KEY=

# DeepSeek 模型 ID (可选)
# 可选值: deepseek-chat, deepseek-reasoner
DEEPSEEK_MODEL=deepseek-chat

# OpenAI API Key (可选)
# 获取地址: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# ========================================
# MCP 服务 API Keys (全部可选)
# ========================================

# Brave Search API Key
# 获取地址: https://brave.com/search/api/
# 免费额度: 2000次/月, 付费 $5/1000次
BRAVE_API_KEY=

# GitHub Personal Access Token
# 获取地址: https://github.com/settings/tokens
# 权限要求: repo, read:user
GITHUB_PERSONAL_ACCESS_TOKEN=

# Google Maps API Key
# 获取地址: https://console.cloud.google.com/
# 免费额度: 每月 $200
GOOGLE_MAPS_API_KEY=

# EverArt API Key (AI绘画)
# 获取地址: https://everart.ai/
EVERART_API_KEY=

# Notion Integration Token
# 获取地址: https://www.notion.so/my-integrations
NOTION_TOKEN=

# Slack Bot Token
# 获取步骤:
# 1. 访问 https://api.slack.com/apps
# 2. 创建新App或选择现有App
# 3. 在 "OAuth & Permissions" 获取 "Bot User OAuth Token"
SLACK_BOT_TOKEN=
SLACK_TEAM_ID=

# ========================================
# Google OAuth 凭据 (Gmail & Calendar)
# ========================================

# Gmail OAuth
GMAIL_CLIENT_ID=
GMAIL_CLIENT_SECRET=
GMAIL_REFRESH_TOKEN=

# Google Calendar OAuth
GOOGLE_CALENDAR_CLIENT_ID=
GOOGLE_CALENDAR_CLIENT_SECRET=
GOOGLE_CALENDAR_REFRESH_TOKEN=

# ========================================
# 数据库配置
# ========================================

# SQLite 数据库路径 (本地开发默认)
DATABASE_PATH=./data/app.db

# SQL Server 连接字符串 (Windows 推荐)
# 格式: mssql://用户名:密码@主机:端口/数据库名?encrypt=true&trustServerCertificate=true
# 本地连接示例:
# DATABASE_URL=mssql://chatbox_user:YourPassword123!@localhost:1433/PersonalChatbox?encrypt=true&trustServerCertificate=true
# 远程连接示例:
# DATABASE_URL=mssql://chatbox_user:YourPassword123!@192.168.1.100:1433/PersonalChatbox?encrypt=true&trustServerCertificate=false
DATABASE_URL=

# PostgreSQL 连接字符串 (Linux/Mac 推荐)
# 格式: postgresql://用户名:密码@主机:端口/数据库名
POSTGRES_URL=
# 或使用分开的配置:
POSTGRES_CONNECTION_STRING=postgresql://postgres:chatbox123@localhost:5432/chatbox

# 数据库连接池配置
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# Qdrant 向量数据库配置 (用于 RAG 应用)
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=

# ========================================
# Sentry 错误追踪 (生产环境推荐)
# ========================================

# Sentry DSN
# 获取步骤:
# 1. 注册账号: https://sentry.io/signup/
# 2. 创建新项目（选择 React）
# 3. 复制 DSN
VITE_SENTRY_DSN=

# 应用版本
VITE_APP_VERSION=1.0.0

# ========================================
# 其他配置
# ========================================

# Agent 分解与重试策略
AGENT_DECOMPOSER_MODEL=gpt-4o-mini
AGENT_DECOMPOSER_TEMPERATURE=0.3
AGENT_DECOMPOSER_MAX_TOKENS=1600
AGENT_DECOMPOSER_MAX_SUBTASKS=8
AGENT_DECOMPOSER_CONTEXT_LIMIT=4000

AGENT_TOOL_REFRESH_AUTO=false
AGENT_TOOL_REFRESH_INTERVAL_MS=600000

AGENT_RETRY_DEFAULT_MAX_ATTEMPTS=2
AGENT_RETRY_DEFAULT_BACKOFF_MS=1500
AGENT_RETRY_DEFAULT_BACKOFF_MULTIPLIER=1.5

AGENT_RETRY_NETWORK_MAX_ATTEMPTS=3
AGENT_RETRY_NETWORK_BACKOFF_MS=2000
AGENT_RETRY_NETWORK_BACKOFF_MULTIPLIER=2

AGENT_RETRY_THROTTLE_MAX_ATTEMPTS=3
AGENT_RETRY_THROTTLE_BACKOFF_MS=5000
AGENT_RETRY_THROTTLE_BACKOFF_MULTIPLIER=2

AGENT_RETRY_VALIDATION_MAX_ATTEMPTS=1
AGENT_RETRY_VALIDATION_BACKOFF_MS=0
AGENT_RETRY_VALIDATION_BACKOFF_MULTIPLIER=1

AGENT_RETRY_TOOL_MAX_ATTEMPTS=2
AGENT_RETRY_TOOL_BACKOFF_MS=3000
AGENT_RETRY_TOOL_BACKOFF_MULTIPLIER=1.5

# 日志文件路径
LOG_FILE=./logs/server.log

# Magg 元服务器配置
MAGG_CONFIG_PATH=.magg/config.json
MAGG_LOG_LEVEL=INFO
MAGG_AUTO_RELOAD=true
MAGG_READ_ONLY=false
MAGG_SELF_PREFIX=magg
# Test modification 2025年10月18日 18:33:21
